AIoutputProcess(text) {
    // 首先处理代码块，将其临时替换为占位符
    const codeBlockPlaceholder = '___CODE_BLOCK_PLACEHOLDER___';
    const codeBlocks = [];
    let index = 0;
    
    // 提取并临时移除所有代码块
    const textWithoutCodeBlocks = text.replace(/```[\s\S]*?```/g, (match) => {
        codeBlocks.push(match);
        return `${codeBlockPlaceholder}_${index++}_`;
    });

    // 处理列表项后的多余空格
    const textWithNormalizedListSpacing = textWithoutCodeBlocks.replace(
        /(^|\n)([*-]|\d+\.)\s+/g,
        (match, prefix, marker) => {
            return prefix + marker + ' '; // 确保只有一个空格
        }
    );

    // 处理普通的内联格式
    const processedText = textWithNormalizedListSpacing.replace(
        /([^\S\n]*)(\*{1,2}[^*]+\*{1,2}|`[^`]+`)([^\S\n]*)/g, 
        (match, leading, content, trailing) => {
            const before = (leading.includes('\n') || match === textWithNormalizedListSpacing.slice(0, match.length)) 
                ? '' 
                : ' ';
            const after = (trailing.includes('\n') || match === textWithNormalizedListSpacing.slice(-match.length)) 
                ? '' 
                : ' ';
            return before + content + after;
        }
    );

    // 将代码块恢复回去
    let finalText = processedText;
    codeBlocks.forEach((codeBlock, i) => {
        finalText = finalText.replace(`${codeBlockPlaceholder}_${i}_`, codeBlock);
    });

    return finalText;
}





sdasdasdasd
$$
daisodkoadkoas
$$
dhauiojdioajio

<strong>dsadadasd</strong>